@using ELTE.IssueR.Models

@model GanttChartViewModel

@{
    ViewBag.Title = "GanttChart";
    Layout = null;
}

@section AddToHead
{
    <link href="@Url.Content("~/Content/Styles/jsgantt.css")" rel="stylesheet" type="text/css" />

    <script type="text/javascript" src="@Url.Content("~/Scripts/jsgantt.js")"></script>
}

<link href="@Url.Content("~/Content/jsgantt.css")" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="@Url.Content("~/Scripts/jsgantt.js")"></script>


<div style="position:relative" class="gantt" id="GanttChartDIV"></div>
<script>
    var g = new JSGantt.GanttChart('g', document.getElementById('GanttChartDIV'), 'day');

    g.setShowRes(0);
    g.setShowDur(0);
    g.setShowComp(0);
    g.setShowStartDate(0);
    g.setShowEndDate(0);
    g.setCaptionType('Resource');
    g.setDateInputFormat('yyyy-mm-dd');
    g.setDateDisplayFormat('yyyy-mm-dd');

    if (g) {
        @for (int i = 0; i < Model.Tasks.Count; i++)
        {
            if (i % 2 == 0)
            {
            @: g.AddTaskItem(new JSGantt.TaskItem(@Model.Tasks[i].Id, '@Model.Tasks[i].Name', '@String.Format("{0:yyyy-MM-dd}", Model.Tasks[i].StartDate)', '@String.Format("{0:yyyy-MM-dd}", Model.Tasks[i].EndDate)', 'ff0000', '', 0, '@Model.Tasks[i].Resource', 0, 0, 0, 1, @Model.Tasks[i].DependentTaskId));
            }
            else
            {
            @: g.AddTaskItem(new JSGantt.TaskItem(@Model.Tasks[i].Id, '@Model.Tasks[i].Name', '@String.Format("{0:yyyy-MM-dd}", Model.Tasks[i].StartDate)', '@String.Format("{0:yyyy-MM-dd}", Model.Tasks[i].EndDate)', 'ff9f00', '', 0, '@Model.Tasks[i].Resource', 0, 0, 0, 1, @Model.Tasks[i].DependentTaskId));
            }
        }

        g.Draw();
        g.DrawDependencies();
    }
    else {
        alert("not defined");
    }

</script>
